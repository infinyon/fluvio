[package]
name = "fluvio"
version = "0.21.0"
edition = "2021"
license = "Apache-2.0"
authors = ["Fluvio Contributors <team@fluvio.io>"]
categories = ["database"]
keywords = ["streaming", "stream", "queue"]
repository = "https://github.com/infinyon/fluvio"
description = "The official Fluvio driver for Rust"
readme = "README.md"

[lib]
name = "fluvio"
path = "src/lib.rs"

[features]
default = ["openssl"]
admin = ["fluvio-sc-schema/use_serde"]
smartengine = ["fluvio-smartengine"]
openssl = ["fluvio-future/openssl_tls"]
rustls = ["fluvio-future/rust_tls"]
unstable = []

[dependencies]
anyhow = { workspace = true }
async-channel = { workspace = true }
async-lock = { workspace = true }
async-rwlock = { workspace = true }
async-trait = { workspace = true }
base64 = { workspace = true }
bytes = { workspace = true }
cfg-if = { workspace = true }
derive_builder = { workspace = true }
event-listener = { workspace = true }
futures-util = { workspace = true }
once_cell = { workspace = true }
pin-project = { workspace = true }
semver = { workspace = true }
serde = { workspace = true, features = ['derive'] }
serde_json = { workspace = true }
siphasher = { workspace = true }
thiserror = { workspace = true }
tokio = { workspace = true, features = ["macros", "rt-multi-thread", "sync"] }
tokio-condvar = "0.1.0"

toml = { workspace = true, features = ["display"] }
tracing = { workspace = true }

# Fluvio dependencies
fluvio-compression = { workspace = true, features = ["compress"] }
fluvio-future = { workspace = true, features = ["retry"] }
fluvio-protocol = { workspace = true,  features = ["compress", "record","api"] }
fluvio-sc-schema = { workspace = true  }
fluvio-smartmodule = { workspace = true  }
fluvio-socket = { workspace = true  }
fluvio-spu-schema = { workspace = true }
fluvio-types = { workspace = true, features = ["events"] }

[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
dirs = { workspace = true }
chrono = { workspace = true, features = ["clock"]}
fluvio-smartengine = { workspace = true,  features = ["engine"], optional = true }

[target.'cfg(target_arch = "wasm32")'.dependencies]
chrono = { workspace = true,  features = ["wasmbind", "clock"]}

[target.'cfg(target_arch = "wasm32")'.dev-dependencies]
wasm-bindgen-test = { workspace = true }
fluvio_ws_stream_wasm = { workspace = true }
