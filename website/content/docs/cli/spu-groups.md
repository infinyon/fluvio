---
title: SPU Groups
weight: 60
---

__SPU Groups__ create a set of SPU replicas that are provisioned by Fluvio __Streaming Controller__ (__SC__) and managed by __Kubernetes__. A group can have one or more replicas that are mapped to __Kubernetes__ stateful-sets. 

SPU-Groups module defines the following CLI operations: 

{{< fluvio >}}
fluvio spu-group <SUBCOMMAND>

SUBCOMMANDS:
    create    Create managed SPU group
    delete    Delete managed SPU group
    list      List managed SPU groups
{{< /fluvio >}}


## Create SPU-Group

Create __SPU-Group__ operation adds a set of SPU replicas to a __Fluvio__ deployment. 

{{< fluvio >}}
fluvio spu-group create [OPTIONS] --name <string> --replicas <replicas>

OPTIONS:
    -n, --name <string>          Managed SPU group name
    -l, --replicas <integer>     SPU replicas
    -i, --min-id <integer>       Minimum SPU id (default: 1)
    -r, --rack <string>          Rack name
    -s, --size <string>          storage size
    -c, --sc <host:port>         Address of Streaming Controller
    -P, --profile <profile>      Profile name
{{< /fluvio >}}

The options are defined as follows:

* <strong>{{< pre >}}--name &lt;string&gt;{{< /pre >}}</strong>:
is the name of the SPU group to be created. See [List SPUs]({{< relref "spus#list-spus" >}}) to view the SPUs generated by the *Create SPU-Group*. The names of the SPUs generated by a group are prepended with the group name. SPU-Group is a mandatory option.

* <strong>{{< pre >}}--replicas &lt;integer&gt;{{< /pre >}}</strong>:
is the number of SPUs to be generated by the SPU-Group. SPU id is computed by combining replica index with {{< pre >}}--min-id{{< /pre >}} option documented below. Replica is a required option and must be a number equal or greater than 1.

* <strong>{{< pre >}}--min-id &lt;integer&gt;{{< /pre >}}</strong>:
is the id of the first replica in the SPU-Group. SPU id is computed by combining replica index with {{< pre >}}--min-id{{< /pre >}} option. Min-id is optional and it defaults to 0.

    {{< caution >}}    
SPU Id is shared by all SPU services in a Fluvio deployment. It is important to pick a min-id and a replica that generates a unique ID which does not collide with other Custom SPUs and Group SPUs.
{{< /caution >}}

* <strong>{{< pre >}}--rack &lt;string&gt;{{< /pre >}}</strong>:
is the rack label inherited by all SPUs generated by the SPU-Group. Rack names have an impact on the *replica-assignment* when new topics are provisioned. The rack is an optional field.

* <strong>{{< pre >}}--size &lt;string&gt;{{< /pre >}}</strong>:
is the amount of storage to be reserved by all SPUs generated by the SPU-Group. The size is an optional field and it defaults to 1Gi.

* <strong>{{< pre >}}--sc &lt;host:port&gt;{{< /pre >}}</strong>:
is the public interface of the Streaming Controller. The SC is an optional field used in combination with [CLI Profiles]({{< relref "overview#profiles" >}}) to compute a target service.

* <strong>{{< pre >}}--profile &lt;profile&gt;{{< /pre >}}</strong>:
is the custom-defined profile file. The profile is an optional field used to compute a target service. For additional information, see [Target Service]({{< relref "overview#target-service" >}}) section.

### Create SPU-Group Example

Create an __SPU-Group__ with 2 replicas and starting with SPU id 101:

{{< fluvio >}}
$ fluvio spu-group create --name my-group --replicas 2 --min-id 101 --sc `SC`:9003
spu-group 'my-group' created successfully
{{< /fluvio >}}


## Delete SPU-Group

Delete __SPU-Group__ operation removes the SPU group and all associated __SPUs__ from a __Fluvio__ deployment. 

Delete __SPU-Group__ has the following syntax:

{{< fluvio >}}
fluvio spu-group delete [OPTIONS] --name <string>

OPTIONS:
    -n, --name <string>        Managed SPU group name
    -c, --sc <host:port>       Address of Streaming Controller
    -P, --profile <profile>    Profile name
{{< /fluvio >}}

The options are defined as follows:

* <strong>{{< pre >}}--name &lt;string&gt;{{< /pre >}}</strong>:
is the name of the SPU-Group to be deleted. The name is a mandatory option.

* <strong>{{< pre >}}--sc &lt;host:port&gt;{{< /pre >}}</strong>:
See [Create SPU-Group](#create-spu-group)

* <strong>{{< pre >}}--profile &lt;profile&gt;{{< /pre >}}</strong>:
See [Create SPU-Group](#create-spu-group)

### Delete SPU-Group Example

Delete __SPU-Group__: 

{{< fluvio >}}
$ fluvio spu-group delete --name my-group --sc `SC`:9003
spu-group 'my-group' deleted successfully
{{< /fluvio >}}

Ensure the SPU engines have also been deleted:

{{< fluvio >}}
$ fluvio spu list --sc `SC`:9003 | grep my-group
<empty>
{{< /fluvio >}}


## List SPU-Groups

List __SPU-Groups__ operation lists all SPU groups in a __Fluvio__ deployment. 

{{< fluvio >}}
fluvio spu-group list [OPTIONS]

OPTIONS:
    -c, --sc <host:port>       Address of Streaming Controller
    -P, --profile <profile>    Profile name
    -O, --output <type>        Output [possible values: table, yaml, json]
{{< /fluvio >}}

The options are defined as follows:

* <strong>{{< pre >}}--sc &lt;host:port&gt;{{< /pre >}}</strong>:
See [Create SPU-Group](#create-spu-group)

* <strong>{{< pre >}}--profile &lt;profile&gt;{{< /pre >}}</strong>:
See [Create SPU-Group](#create-spu-group)

* <strong>{{< pre >}}--output &lt;type&gt;{{< /pre >}}</strong>:
is the format to be used to display the SPU-Groups. The output is an optional field and it defaults to __table__ format. Alternative formats are: __yaml__ and __json__.

### List SPU-Groups Example

List all __SPU-Groups__: 

{{< fluvio >}}
$ fluvio spu-group list --sc `SC`:9003
 NAME      REPLICAS  MIN ID  RACK  SIZE  STATUS 
 group3       3           0         1Gi  Reserved 
 my-group     2         101         1Gi  Reserved 
{{< /fluvio >}}

To list the SPUs generated by __SPU-Group__ "my-group", pipe the output through grep:

{{< fluvio >}}
$ fluvio spu list --sc `SC`:9003 | grep my-group
 101  my-group-0  online  managed   -    10.111.137.254:9005  flv-spg-my-group-0.flv-spg-my-group:9006 
 102  my-group-1  online  managed   -    10.102.120.188:9005  flv-spg-my-group-1.flv-spg-my-group:9006 
{{< /fluvio >}}



{{< links "Related Topics" >}}
* [Produce CLI]({{< relref "produce" >}})
* [Consume CLI]({{< relref "consume" >}})
* [SPUs CLI]({{< relref "spus" >}})
* [Custom SPU CLI]({{< relref "custom-spus" >}})
* [Topics CLI]({{< relref "topics" >}})
{{< /links >}}